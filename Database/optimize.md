# mysql优化

##一表的优化与列类型选择

表的优化：

1.定长与边长分离

如id int 占用4个字节 char(4)占用4个字符。time 也是定长；

即每一个单元占用的字节是固定

而 varchar，text blob这种边长字段存放到一张表中。

2.常用字段和不常用字段分离

3.常用字段冗余

列类型的选择

列类型选择的优先级： 整形>date,time>enum,char>blob,text

tinyint(1) > char(1)

在空间上都占用1个字节，但是order by 排序，前者快，因为后者需要考虑字符集与校对集（即排序规则）

time 也是定长，考虑时区，不是太方便，写sql时，优先考虑时间戳

enum是枚举类型，能起约束值的作用，内部用整形来存储，但与char联查是，内部

char 定长 考虑字符集和（排序）校对集

varchar 不定长 要考虑字符集和排序的校对集，速度慢

text/blob 无法使用内存临时表（排序等操作只能在磁盘上）

列长度够用就行，不要慷慨 

列的选择尽量避免null；5.7做了优化，但是查询依然不方便

性别：以utf8为例：

char(1);3个字节

enum('男'，‘女’);内部转成数字来存，多了一个转换过程

tinyint();定长 1个字节；